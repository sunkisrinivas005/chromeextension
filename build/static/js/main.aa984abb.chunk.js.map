{"version":3,"sources":["Hooks/useWindowPosition.js","Contexts/ModalProvider.js","Components/Modal.js","App.js","index.js"],"names":["useWindowPosition","windowPosition","x","y","ModalContext","React","createContext","ModalProvider","children","useState","undefined","sid","setSID","loading","setLoading","view","setView","product","setProduct","url","useEffect","window","addEventListener","event","source","data","type","value","queryString","parse","location","href","refid","Object","values","console","log","advertiserId","split","length","fetch","then","res","json","lid","catch","err","Provider","getSID","postMessage","clearLocalStorage","regex","Modal","Consumer","hasDraggedWindowPosition","handle","defaultPosition","position","id","className","style","transform","textAlign","color","padding","alignSelf","justifyContent","margin","width","height","marginTop","fontWeight","marginBottom","test","programName","categories","promotionalTypes","flexDirection","Button","variant","onClick","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aa984abb.chunk.js","sourcesContent":["\r\nconst useWindowPosition = () => {\r\n  return {\r\n    windowPosition:  { x: 800, y: -30 },\r\n  }\r\n};\r\n\r\nexport default useWindowPosition;\r\n","import React, { useEffect, useState } from 'react';\r\nimport useWindowPosition from '../Hooks/useWindowPosition';\r\nimport queryString from 'query-string'\r\n\r\nexport const ModalContext = React.createContext({});\r\n\r\nconst ModalProvider = ({ children }) => {\r\n  const { windowPosition } = useWindowPosition();\r\n  const [sid, setSID] = useState(undefined);\r\n  const [loading, setLoading] = useState(false);\r\n  const[view , setView] = useState(false);\r\n  const[product, setProduct] = useState(\"\");\r\n  const[url, setUrl] = useState(\"\");\r\n\r\n  function getSID() {\r\n    setLoading(true)\r\n    window.postMessage({ type: \"GET_SID\" }, \"*\");\r\n    // fetch('https://iapi.corp.flexoffers.com/link/24.221154.6646609').then(res => res.json()).then(data => {\r\n    //         const { lid } = data[0];\r\n    //         setProduct(data[0]);\r\n    //         setView(true);\r\n    //         setLoading(false);\r\n    //       }).catch(err => {\r\n    //         setProduct('');\r\n    //         setView(true);\r\n    //         setLoading(false);\r\n    //       });\r\n  }\r\n\r\n  function clearLocalStorage(){\r\n    setLoading(true);\r\n    window.postMessage({type: 'CLEAR_LOCAL_STORAGE'}, '*');\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Set up event listeners from Content script\r\n    window.addEventListener(\"message\", function(event) {\r\n      if (event.source !== window) return;\r\n      if (event.data.type && (event.data.type === \"SID_RESULT\")) {\r\n        setSID(event.data.sid);\r\n        const value = queryString.parse(\r\n          window.location.href\r\n        );\r\n          let refid = Object.values(value)[0];\r\n          console.log(refid, 'refid.')\r\n          refid = refid && refid.split('FOF');\r\n          let advertiserId = refid[0] ? refid[0] : '';\r\n          if(advertiserId && advertiserId.length) {\r\n            fetch('https://iapi.corp.flexoffers.com/link/'+ advertiserId).then(res => res.json()).then(data => {\r\n              const { lid } = data[0];\r\n              setProduct(data[0]);\r\n              setView(true);\r\n              setLoading(false);\r\n            }).catch(err => {\r\n              setProduct('');\r\n              setView(true);\r\n              setLoading(false);\r\n            });\r\n          }else {\r\n            \r\n          }\r\n          // let programId = refid[1] ? refid[1] : '';\r\n          // let promotionalId = refid[2] ? refid[2].split('FOF')[0] : '';\r\n          // let concat = `advertiserId - ${advertiserId} --- programId --- ${programId} ---- promotionalId --- ${promotionalId}`;\r\n         \r\n        // }\r\n      }\r\n      if(event.data.type && (event.data.type === \"CLEAR_LOCAL_RESULT\")){\r\n        console.log(event.data.value, 'from message cleared');\r\n        setProduct('');\r\n        setLoading(false);\r\n        setView(false);\r\n      }\r\n     if(event.data.type && (event.data.type === \"CHECK_API_HIT\")){\r\n       console.log('testing',  event.data.value);\r\n     }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <ModalContext.Provider\r\n      value={{\r\n        sid,\r\n        getSID,\r\n        windowPosition,\r\n        view,\r\n        loading,\r\n        product,\r\n        url,\r\n        clearLocalStorage\r\n      }}\r\n    >\r\n      {children}\r\n    </ModalContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ModalProvider;\r\n","import React from 'react';\r\nimport Draggable from 'react-draggable';\r\nimport { ModalContext } from '../Contexts/ModalProvider';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { Button } from '@material-ui/core';\r\n\r\n\r\nconst  regex = /(?:\\d+FOF\\d+)/i;\r\n// regex.test(sid) ? \"sid is valid\" : \"sid is not valid\"\r\n\r\nconst Modal = () => {\r\n  return (\r\n    <ModalContext.Consumer>\r\n      {({\r\n        windowPosition,\r\n        hasDraggedWindowPosition,\r\n        sid,\r\n        getSID,\r\n        loading,\r\n        view,\r\n        product,\r\n        url,\r\n        clearLocalStorage\r\n      }) => (\r\n        <Draggable\r\n          handle=\".modal-handle\"\r\n          defaultPosition={{ x: windowPosition.x, y: windowPosition.y }}\r\n          position={\r\n            hasDraggedWindowPosition\r\n              ? { x: windowPosition.x, y: windowPosition.y }\r\n              : null\r\n          }\r\n        >\r\n          <div\r\n            id=\"modal\"\r\n            className=\"modal-window\"\r\n            style={{\r\n              transform: windowPosition,\r\n            }}\r\n          >\r\n            {console.log(product, 'product')}\r\n            <div className=\"modal-window-inner-border\">\r\n              <>\r\n                <div className=\"modal-body\">\r\n                  <div className=\"modal-handle\"></div>\r\n                  <div className=\"col-lg-12\" style={{ textAlign: 'center', }}>\r\n                    <h3 style={{ color: 'white' }}>\r\n                      {' '}\r\n                      Direct Advertiser - Tracking Tool\r\n                    </h3>\r\n                  </div>\r\n                  <div className=\"modal-content\">\r\n                    <>\r\n                      {view ? (\r\n                        <div\r\n                          style={{\r\n                            padding: '25px 0px 0px 0px',\r\n                            alignSelf:\"center\"\r\n                          }}\r\n                         >\r\n                          <div\r\n                            className=\"col-lg-12 row\"\r\n                            style={{\r\n                              justifyContent: 'space-between',\r\n                              margin: '10px',\r\n                            }}\r\n                          >\r\n                             <div\r\n                              className = 'col-lg-2'\r\n                            >\r\n                              {sid && sid.length ? (\r\n                                <CheckCircleIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: '#008000',\r\n                                  }}\r\n                                />\r\n                              ) : (\r\n                                <CancelIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: 'red',\r\n                                  }}\r\n                                />\r\n                              )}\r\n                            </div>\r\n                            <div className=\"col-lg-9\" style={{ justifyContent:\"space-between\" }}>\r\n                            <h5\r\n                                style={{ color: 'black', marginTop: '4px' }}\r\n                              >\r\n                                SID found\r\n                              </h5>\r\n                              <p style={{ color: 'black', fontWeight: 'bold' }}>\r\n                                {sid ? sid : 'no sid found'}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div\r\n                            className=\"col-lg-12 row\"\r\n                            style={{\r\n                              justifyContent: 'space-between',\r\n                              margin: '10px',\r\n                            }}\r\n                          >\r\n                            <div\r\n                             className = 'col-lg-2'\r\n                            >\r\n                              {sid && sid.length ? (\r\n                                <CheckCircleIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: '#008000',\r\n                                  }}\r\n                                />\r\n                              ) : (\r\n                                <CancelIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: 'red',\r\n                                  }}\r\n                                />\r\n                              )}\r\n                            </div>\r\n                            <div className=\"col-lg-9\" style={{ justifyContent:\"space-between\" }}>\r\n                              <h5\r\n                                style={{ color: 'black', marginBottom: '0px' }}\r\n                              >\r\n                                SID Valid\r\n                              </h5>\r\n                              <p style={{ color: 'black', fontWeight: 'bold', marginBottom:'2px' }}>\r\n                                {sid && sid.length\r\n                                  ? regex.test(sid)\r\n                                    ? 'valid sid format'\r\n                                    : 'sid is not valid'\r\n                                  : 'sid not found'}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div\r\n                            className=\"col-lg-12 row\"\r\n                            style={{\r\n                              justifyContent: 'space-between',\r\n                              margin: '10px',\r\n                            }}\r\n                          >\r\n                            <div\r\n                             className = 'col-lg-2'\r\n                            >\r\n                              {product && product ? (\r\n                                <CheckCircleIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: '#008000',\r\n                                  }}\r\n                                />\r\n                              ) : (\r\n                                <CancelIcon\r\n                                  style={{\r\n                                    width: '60px',\r\n                                    height: '60px',\r\n                                    color: 'red',\r\n                                  }}\r\n                                />\r\n                              )}\r\n                            </div>\r\n                            <div className=\"col-lg-9\" style={{ justifyContent:\"space-between\" }}>\r\n                              <h5\r\n                                style={{ color: 'black', marginBottom: '0px' }}\r\n                              >\r\n                                {product ? 'Link Id found' : 'Link not found' }\r\n                              </h5>\r\n                              <p style={{ color: 'black', fontWeight: 'bold' }}>\r\n                                {product && product.advertiserId ? (\r\n                                  <>\r\n                                  <span> Program name: {product.programName}</span>\r\n                                  <br />\r\n                                  <span>Categories: {product.categories}</span>\r\n                                  <br />\r\n                                  <span>promotionalTypes : {product.promotionalTypes}</span>\r\n                                  <br />\r\n                                  <span>link id: {product.lid}</span>\r\n                                  </>\r\n                                ) : 'Not a valid link from advertiser' }\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div style= {{flexDirection:'row', textAlign:'center'}}>\r\n                          <Button\r\n                          variant = 'contained'\r\n                          color = 'primary'\r\n                          onClick = {() => clearLocalStorage()}\r\n                          >\r\n                            Clear Local Storage\r\n                          </Button>\r\n                          </div>\r\n                        </div>\r\n                      ) : loading ? (\r\n                        <p>loading..........</p>\r\n                      ) : null}\r\n                    </>\r\n                  { !view &&  <div\r\n                      style={{\r\n                        padding: '10px',\r\n                        textAlign: 'center',\r\n                        marginBottom: '25px',\r\n                      }}\r\n                    >\r\n                      <button onClick={() => getSID()} className=\"modal-button\">\r\n                        Load Values\r\n                      </button>\r\n                    </div>}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            </div>\r\n          </div>\r\n        </Draggable>\r\n      )}\r\n    </ModalContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Modal from './Components/Modal';\r\nimport ModalProvider from './Contexts/ModalProvider';\r\n\r\n/**\r\n * @return {null}\r\n */\r\nfunction App() {\r\n  return (\r\n    <ModalProvider>\r\n      <Modal />\r\n    </ModalProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\nReactDOM.render(\r\n  <>\r\n    <App />\r\n  </>, document.getElementById('modal-window'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}